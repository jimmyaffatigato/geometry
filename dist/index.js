var v=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var G=Object.prototype.hasOwnProperty;var V=(u,t)=>{for(var e in t)v(u,e,{get:t[e],enumerable:!0})},M=(u,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of R(t))!G.call(u,i)&&i!==e&&v(u,i,{get:()=>t[i],enumerable:!(r=A(t,i))||r.enumerable});return u};var $=u=>M(v({},"__esModule",{value:!0}),u);var F={};V(F,{Angle:()=>f,Grid:()=>z,Line:()=>P,Point:()=>s,Rectangle:()=>x,Row:()=>w,Vector:()=>m});module.exports=$(F);var g=class{value;max;min;setValue(t){if(t<=this.max&&t>=this.min)return new g(t,this.max,this.min);if(t>this.max)return this.maximize();if(t<this.min)return this.minimize()}maximize(){return this.setValue(this.max)}minimize(){return this.setValue(this.min)}negate(){return this.setValue(-this.value)}add(t){return this.setValue(this.value+t)}multiply(t){return this.setValue(this.value*t)}type="scalar";clone(){return new g(this.value,this.max,this.min)}match(t){return this.value==t.value}toString(){return`${this.value} [${this.min} < x > ${this.max}]`}constructor(t,e=1/0,r=1/0){let i=0,a=0,S=0;typeof t=="number"?i=t:i=t.value,typeof e=="number"?a=e:a=e.value,typeof r=="number"?S=r:S=r.value,this.max=a,this.min=S,this.value=L(i,this.max,this.min)}},y=g;function L(u,t,e){return u>t?t:u<e?e:u}var n=class{_x;_y;get x(){return this._x.value}get y(){return this._y.value}get position(){return this.clone()}setPosition(t){return new n(t.x,t.y)}translateX(t){return new n(this.x+t,this.y)}translateY(t){return new n(this.x,this.y+t)}translate(t){return new n(this.x+t.x,this.y+t.y)}scale(t){return typeof t=="number"?new n(this.x*t,this.y*t):new n(this.x*t.x,this.y*t.y)}floor(){return new n(Math.floor(this.x),Math.floor(this.y))}absolute(){return new n(Math.abs(this.x),Math.abs(this.y))}difference(t){return new n(t.x-this.x,t.y-this.y)}distance(t){let{x:e,y:r}=this.difference(t);return Math.sqrt(e**2+r**2)}direction(t){return new f(Math.atan2(t.y-this.y,t.x-this.x))}reflect(){return new n(-this.x,-this.y)}reflectX(){return new n(-this.x,this.y)}reflectY(){return new n(this.x,-this.y)}isWithin(t,e){return this.distance(t)<=e}rotate(t){return this.toVector().rotate(t).toPoint()}toArray(){return[this.x,this.y]}toVector(){return new m(n.zero.direction(this),n.zero.distance(this))}type="point";clone(){return new n(this.x,this.y)}match(t){return this.x==t.x&&this.y==t.y}toString(t=2){return`[${this.x.toFixed(t)}, ${this.y.toFixed(t)}]`}constructor(t,e){let r=0,i=0;typeof t=="number"&&typeof e=="number"?(r=t,i=e):t instanceof n?(r=t.x,i=t.y):Array.isArray(t)?(r=t[0],r=t[1]):t instanceof y&&e instanceof y&&(r=t.value,i=e.value),this._x=new y(r),this._y=new y(i)}static get zero(){return new n(0,0)}static get one(){return new n(1,1)}},s=n;var o=class{position;get x(){return this.position.x}get y(){return this.position.y}translate(t){return new o(this.position.translate(t),this.size)}setPosition(t){return new o(t,this.size)}size;get width(){return this.size.x}get height(){return this.size.y}get area(){return this.width*this.height}scale(t){return new o(this.position,this.size.scale(t))}expand(t){return new o(this.position.translate(t.reflect()),this.size.translate(t.scale(2)))}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}contains(t){return t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom}reflect(){return new o(this.position.reflect(),this.size.reflect())}reflectX(){return new o(this.position.reflectX(),this.size.reflectX())}reflectY(){return new o(this.position.reflectY(),this.size.reflectY())}intersects(t){return!(t.left>this.right||t.right<this.left||t.top>this.bottom||t.bottom<this.top)}floor(){return new o(this.position.floor(),this.size.floor())}toArray(){return[this.x,this.y,this.width,this.height]}toRectangle(){return this.clone()}type="rectangle";clone(){return new o(this.position,this.size)}match(t){return this.position.match(t.position)&&this.size.match(t.size)}toString(t=2){let{x:e,y:r,width:i,height:a}=this;return`[${e.toFixed(t)}, ${r.toFixed(t)}, ${i.toFixed(t)}, ${a.toFixed(t)}]`}constructor(t,e,r,i){this.type="rectangle",typeof t=="number"&&typeof e=="number"&&typeof r=="number"&&typeof i=="number"?(this.position=new s(t,e),this.size=new s(r,i)):t instanceof s&&e instanceof s&&(this.position=t,this.size=e)}},x=o;var p=class{origin;end;get length(){return this.origin.distance(this.end)}get angle(){return this.origin.direction(this.end)}reverse(){return new p(this.end,this.origin)}translate(t){return new p(this.origin.translate(t),this.end.translate(t))}rotate(t){return this.toVector().rotate(t).toLine(this.origin)}rotateByDegree(t){return this.rotate(Math.PI/180*t)}setAngle(t){return this.toVector().setAngle(t).toLine(this.origin)}toVector(){return new m(this.angle,this.length)}toRectangle(){return new x(this.origin,this.end)}type="line";clone(){return new p(this.origin,this.end)}match(t){return t.origin.match(this.origin)&&t.end.match(this.end)}floor(){return new p(this.origin.floor(),this.end.floor())}toString(){return`${this.origin.toString()} => ${this.end.toString()}`}constructor(t,e){this.origin=t,this.end=e}},P=p;var h=class{angle;magnitude;setMagnitude(t){return new h(this.angle,t)}scale(t){return new h(this.angle,this.magnitude*t)}setAngle(t){return new h(t,this.magnitude)}rotate(t){return new h(this.angle.rotate(t),this.magnitude)}rotateByDegrees(t){return this.rotate(Math.PI/180*t)}toPoint(){return new s(Math.cos(this.angle.radians)*this.magnitude,Math.sin(this.angle.radians)*this.magnitude)}toLine(t=s.zero){return new P(s.zero,this.toPoint()).translate(t)}type="vector";clone(){return new h(this.angle,this.magnitude)}match(t){return t.angle==this.angle&&t.magnitude==this.magnitude}floor(){return new h(this.angle,Math.floor(this.magnitude))}absolute(){return new h(this.angle.absolute(),Math.abs(this.magnitude))}toString(t=2){return`${this.angle.degrees.toFixed(t)}\xB0 x ${this.magnitude.toFixed(t)}`}constructor(t,e=0){this.angle=t,this.magnitude=e}static get zero(){return new h(new f(0))}},m=h;var b=class{radians;get degrees(){return this.radians/(Math.PI/180)}rotate(t){return new b(this.radians+t)}rotateByDegrees(t){return this.rotate(Math.PI/180*t)}toVector(){return new m(this)}type="angle";clone(){return new b(this.radians)}match(t){return this.radians==t.radians}floor(){return new b(Math.floor(this.radians))}absolute(){return new b(Math.abs(this.radians))}toString(){return`${this.degrees}\xB0 (${this.radians})`}constructor(t){this.radians=t}static degrees(t){return new b(t*(Math.PI/180))}},f=b;var l=class{type="row";values;get length(){return this.values.length}constructor(t){this.values=t}static of(t,e){let r=[];for(let i=0;i<t;i++)r.push(e(i));return new l(r)}static zero(t){return l.of(t,()=>0)}valueAt(t){return this.values[t]}reverse(){return new l(this.values.reverse())}map(t){return new l(this.values.map(t))}shiftRight(t){if(t>0){let e=this.values.slice(0,-t);return new l(d(this.length-e.length,()=>0).concat(e))}if(t<0)return this.shiftLeft(-t);if(t==0)return this.clone()}shiftLeft(t){if(t>0){let e=this.values.slice(t);return new l(e.concat(d(this.length-e.length,()=>0)))}if(t<0)return this.shiftRight(-t);if(t==0)return this.clone()}stretch(t){let e=[];for(let r=0;r<this.length;r++)for(let i=0;i<t;i++)e.push(this.valueAt(r));return new l(e)}clone(){return new l(this.values)}sum(t,e=0){let r=this.values.map((i,a)=>i+t.shiftRight(e).valueAt(a));return new l(r)}toString(){return this.values.map(t=>`[${t.toString().padEnd(3," ")}]`).join("")}toArray(){return this.values.slice(0)}toGrid(){return new z([this])}},w=l;var d=(u,t)=>{let e=[];for(let r=0;r<u;r++)e.push(t(r));return e},c=class{type="grid";rows;width;height;get area(){return this.width*this.height}get size(){return new s(this.width,this.height)}constructor(t){this.rows=t,this.width=t[0].length,this.height=t.length}clone(){return new c(this.rows.map(t=>t.clone()))}valueAt(t){return t.y>=0&&t.y<this.rows.length?this.rows[t.y].valueAt(t.x):null}rowAt(t){return t>=0&&t<this.rows.length?this.rows[t]:w.zero(this.width)}mapRows(t){let e=this.rows.map(t);return new c(e)}shiftLeft(t){return new c(this.rows.map(e=>e.shiftLeft(t)))}shiftRight(t){return new c(this.rows.map(e=>e.shiftRight(t)))}shiftUp(t){let e=this.rows.slice(t);return new c(e.concat(d(this.height-e.length,()=>w.zero(this.width))))}shiftDown(t){let e=this.rows.slice(0,-t);return new c(d(this.height-e.length,()=>w.zero(this.width)).concat(e))}stretch(t){let e=[];for(let r=0;r<this.rows.length;r++)for(let i=0;i<t.y;i++)e.push(this.rowAt(r).stretch(t.x));return new c(e)}sum(t,e=s.zero){let r=t.shiftDown(e.y).shiftRight(e.x);return new c(this.rows.map((i,a)=>i.sum(r.rowAt(a))))}toString(){return this.rows.map(t=>`${t.toString()}`).join(`
`)}},z=c;0&&(module.exports={Angle,Grid,Line,Point,Rectangle,Row,Vector});
